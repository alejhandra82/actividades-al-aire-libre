<div class="container mt-5">
  <div class="card shadow p-4">
    <h2 class="mb-4 text-center border-bottom pb-2 text-dark-emphasis">
      MI PERFIL
    </h2>

    <form
      [formGroup]="perfilForm"
      (ngSubmit)="guardarCambios()"
      class="row g-4"
    >
      <!-- Foto de perfil -->
      <div class="col-md-4 text-center">
        <div
          class="border rounded-circle bg-light p-2 mx-auto"
          style="
            width: 220px;
            height: 220px;
            display: flex;
            justify-content: center;
            align-items: center;
          "
        >
          <img
            [src]="imagenPreview"
            alt="Foto de perfil"
            class="rounded-circle img-thumbnail"
            style="width: 200px; height: 200px; object-fit: cover"
          />
        </div>

        <!-- Bot칩n personalizado -->
        <label class="btn btn-salmon rounded-pill w-100 mt-3">
          Cambiar foto
          <input
            type="file"
            class="d-none"
            (change)="previsualizarImagen($event)"
          />
        </label>
      </div>

      <!-- Datos -->
      <div class="col-md-8">
        <!-- Nombre -->
        <div class="mb-3">
          <label for="nombreUsuario" class="form-label fw-bold">Nombre</label>
          <input
            type="text"
            id="nombreUsuario"
            class="form-control"
            formControlName="nombreUsuario"
            placeholder="Escribe tu nombre"
          />

          <small
            class="text-danger"
            *ngIf="mostrarError('nombreUsuario', 'required')"
          >
            El nombre es obligatorio.
          </small>
        </div>

        <!-- Apellidos -->
        <div class="mb-3">
          <label for="apellidoUsuario" class="form-label fw-bold"
            >Apellidos</label
          >
          <input
            type="text"
            id="apellidoUsuario"
            class="form-control"
            formControlName="apellidoUsuario"
            placeholder="Escribe tus apellidos"
          />

          <small
            class="text-danger"
            *ngIf="mostrarError('apellidoUsuario', 'required')"
          >
            Los apellidos son obligatorios.
          </small>
        </div>

        <!-- Correo -->
        <div class="mb-3">
          <label for="correo" class="form-label fw-bold">Correo</label>
          <input
            type="email"
            id="correo"
            class="form-control"
            formControlName="correo"
            placeholder="ejemplo@correo.com"
          />

          <small class="text-danger" *ngIf="mostrarError('correo', 'required')">
            El correo es obligatorio.
          </small>
          <small class="text-danger" *ngIf="mostrarError('correo', 'email')">
            Introduce un correo v치lido.
          </small>
        </div>

        <!-- Familia -->
        <div class="mb-3">
          <label class="form-label fw-bold">Familia</label>
          <input
            type="text"
            class="form-control"
            [value]="nombreFamilia"
            disabled
          />
        </div>

        <div class="d-flex gap-2 justify-content-end flex-wrap">
  <!-- Bot칩n crear Familia -->
  <button
    class="btn btn-warning flex-fill"
    (click)="irACrearFamilia()"
  >
    Crear familia
  </button>

  <!-- Bot칩n guardar -->
  <button
    type="submit"
    class="btn btn-success flex-fill"
    [disabled]="perfilForm.invalid"
  >
    Guardar cambios
  </button>
</div>

      </div>
    </form>
  </div>
</div>
